<!DOCTYPE html>
<html>
    <head>
        <title>iocp</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
            <style>
            .tablet {
                height: 150px;
                width: 150px;
            }
        </style>
    </head>

    <body ng-app="iocp" class="w3-light-grey">

        <div ng-controller="liveview"
            class="w3-container"
        >

            <div ng-repeat="x in samples"
                 class="w3-tag w3-margin {{types[x].color}} w3-padding-large w3-bottombar w3-border-black"
            >
                <div class="w3-display-container tablet">
                    <div class="w3-display-topleft fa {{types[x].icon}} w3-xxxlarge"></div>
                    <div class="w3-display-topright"><h2>{{sample[x]}}{{types[x].unit}}<h2></div>
                    <div class="w3-display-bottomleft"><h3>{{types[x].title}}</h3></div>
                </div>
            </div>

        </div>

        <script>
            var iocp = angular.module("iocp", []);

            iocp.controller("liveview", function($scope, $http, $interval) {

                $scope.types = {
                    "t": { "title": "temp", "icon": "fa-thermometer-1", "color": "w3-red", "unit": String.fromCharCode(176) + "C" },
                    "h": { "title": "humidity", "icon": "fa-cloud", "color": "w3-blue", "unit": "%" },
                    "l": { "title": "luminance", "icon": "fa-sun-o", "color": "w3-green", "unit": "lx" },
                };


                $scope.sample = {"h":53,"node":"esp8266:18:fe:34:e1:1d:8b","l":0,"t":31,"timestamp":"2017-05-23T16:28:14.501Z","_id":"5924631ecbc7e301725661b6"};
                $scope.samples = Object.keys($scope.sample).filter( function(k) {return !(k=="node"|k=="timestamp"|k=="_id");} )
                // $scope.samples = [1,2,3,4,5]

            });




        </script>

    </body>

</html>
